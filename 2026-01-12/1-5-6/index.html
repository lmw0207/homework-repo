<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./../../reset.css" />
    <style>
      body {
        background-color: #1a110f;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }
      .title {
        margin: 0 0 20px;
        text-align: center;
        font-size: 50px;
        color: #a08c87;
      }
      .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 13px;
        width: 1300px;
      }
      #todo-input {
        box-sizing: border-box;
        flex-grow: 1;
        width: 400px;
        height: 55px;
        padding: 15px;
        font-size: 18px;
        border: 2px solid #a08c87;
        background-color: #423734;
        border-radius: 10px;
        outline: none;
      }
      .input-box {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 10px;
      }
      #todo-list {
        list-style: none;
        padding: 0;
        /* width: 100%; */
        /* max-width: 650px; */
        color: wheat;
        text-align: center;
      }

      #todo-list li {
        margin-bottom: 10px;
        padding: 10px;
        background: #423734;
        border-radius: 4px;
      }
      .todo-item {
        width: 460px;
        height: 70px;
        justify-content: space-between;
        display: flex;

        align-items: center;
      }

      #add-btn {
        background-color: #1a110f;
        color: wheat;
        border: none;
        border-radius: 50%;
        cursor: pointer;
      }
      #add-btn:hover {
        color: #ffd5a099;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="title">Todo List</h1>
      <div class="input-box">
        <input id="todo-input" type="text" placeholder="할 일을 입력 하시오." />
        <button id="add-btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="50px"
            height="50px"
            fill="currentColor"
            class="bi bi-plus-circle-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"
            />
          </svg>
        </button>
      </div>
      <ul id="todo-list"></ul>
      <script>
        const todoInput = document.getElementById("todo-input");
        const addBtn = document.getElementById("add-btn");
        const todoList = document.getElementById("todo-list");
        const TODO_KEY = "todos";

        function saveTodo(todos) {
          localStorage.setItem(TODO_KEY, JSON.stringify(todos));
        }
        function loadTodos() {
          const savedTodos = localStorage.getItem(TODO_KEY); // 없으면 null
          return savedTodos ? JSON.parse(savedTodos) : [];
        }

        function addTodo() {
          const text = todoInput.value.trim();

          if (!text) {
            alert("할 일을 입력해 주세욥!");
            return;
            // text가 없다면 alert이 뜬다.
          }
          const todos = loadTodos(); // [ ]: 빈배열 또는 {"문자열"}
          todos.push(text);
          saveTodo(todos);

          // const li = document.createElement("li");
          // li.className = "todo-item"
          // li.textContent = text;

          todoInput.value = "";

          render();
        }
        function deleteTodo(index) {
          const todos = loadTodos();
          const updateTodos = todos.filter((_, i) => index !== i);
          saveTodo(updateTodos);
          render();
        }
        function render() {
          const todos = loadTodos();
          todoList.innerHTML = "";

          todos.forEach((todo, index) => {
            const li = document.createElement("li");
            li.className = "todo-item";
            li.textContent = todo;

            const deleteBtn = document.createElement("button");
            deleteBtn.className = "delete-Btn";
            deleteBtn.textContent = "삭제";

            deleteBtn.addEventListener("click", () => {
              deleteTodo(index);
            });
            li.appendChild(deleteBtn);

            todoList.appendChild(li);
          });
        }

        addBtn.addEventListener("click", addTodo);
        document.addEventListener("DOMContentLoaded", render);

        // 1. 추가 버튼을 누르면 리스트가 추가
        //  = 추가 버튼 필요하고, li 만들어서 인풋 데이터를 넣어주고, ul에 보내주기
        //    추가 버튼에 클릭 이벤트 달아야함
        //    addTodo 함수를 만들어서 작업

        // 2. 추가한 목록이 배열로 로컬스토리지에 저장
        //  = 할 일 입력된 글자들을 배열에 담아야함 -> 배열로 관리
        //    addTodo 함수 안에서 저장도 같이
        //    로컬스토리지에 저장하려면 이미 저장된 데이터를 불러와서 거기에 추가 필요

        // 3. 새로고침시 로컬 스토리지에 있는 배열이 로드 되어서 화면에 그려져야됨
        //  = 바로 실행될 렌더함수를 구현
        //    렌더함수에서 로컬스토리지를 읽어옴 -> 데이터가 없다면? 빈 배열을 쓰기
        //    읽어온 데이터를 돔으로 렌더링 시켜주기

        // 4. 로컬 스트리지 로드 함수 만들어서 렌더와 addTodo에서 사용하기
        //    로컬 스토리지 세이브 함수도 만들어서 사용하기
      </script>
    </div>
  </body>
</html>
